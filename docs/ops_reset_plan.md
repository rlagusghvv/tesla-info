# OpenClaw 멀티에이전트 구조 리셋/재설계 플랜(팀장용)

요구사항(대표 지시):
- 구조 전부 초기화 후 재세팅
- 팀장(@youngsam_bot) 외 다른 봇은 텔레그램 발화 차단
- 최선의 운영 구조(업무분담/핸드오프/배포/검증)로 재설계

## A. 원칙(리셋 후 반드시 지킬 것)
1) Telegram 발화는 팀장 1명만
2) 작업자는 파일(MD)로만 보고/로그/결과
3) "완료"는 Definition of Done 체크리스트 충족으로만 선언
4) 사용자가 보는 메인 URL 기준으로 반영/검증

## B. 리셋 체크리스트(운영)
### 1) 채팅 발화 차단
- (권장) 텔레그램 봇 토큰을 팀장 봇 1개만 사용
- 다른 에이전트/서브에이전트는 `message` tool 사용 금지(또는 채널 플러그인 비활성)
- 불가 시: 모든 봇을 동일 봇 계정으로 쓰지 말고, "작업자 세션"은 아예 Telegram 라우팅이 없는 isolated 세션으로만 생성

### 2) 문서 단일화
- Canonical:
  - `tesla-info/_repo/docs/HANDOFF.md` (규칙/역할/금지)
  - `tesla-info/_repo/current_progress.md` (타임라인/의사결정)
  - `coupang-automation/docs/current_progress.md` (쿠팡코끼리 서버/DB/파이프라인)
- 모든 테스크 산출물은 `docs/tasks/<task-id>.md`로 모으기

### 3) 테스크 분해/배정 템플릿
- Task 카드에 반드시 포함:
  - 목표/범위(명확히)
  - 완료조건(DoD)
  - 변경 파일 목록
  - 검증 방법(명령/URL)
  - 리스크/롤백

### 4) 배포/검증 파이프라인 고정
- 서비스 엔드포인트/라우팅(Cloudflared ingress) 문서화
- launchd 서비스 목록/포트 맵 문서화
- "반영 확인" 스크립트/커맨드 1개로 통일

## C. 추천 구조(현 시스템 기준)
- 팀장 세션(텔레그램 연결 O):
  - 테스크 분해/스케줄/최종 요약/배포
- 작업자 세션(텔레그램 연결 X):
  - 코드 수정/리서치/테스트
  - 결과는 MD로만 남김
- 정리자 세션(텔레그램 연결 X):
  - MD 취합 1차 요약 생성
  - 팀장이 최종 전달

## D. 즉시 실행 제안(오늘)
1) 팀장이 `HANDOFF.md`에 리셋 선언(규칙/역할/문서 경로 재확정)
2) 이후 모든 작업자는 Telegram mute 상태로 sub-agent 생성
3) 쿠팡코끼리: "메인 URL에 반영" 체크리스트부터 재정의 후, 기능 이식/품질 개선 재시작
